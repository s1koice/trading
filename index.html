<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <title>Trading Journal</title>

  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    body { margin: 0; background:#0b0f19; color:#e7eaf3; }
    header { padding: 18px 16px; border-bottom: 1px solid #1b2440; position: sticky; top:0; background:#0b0f19; z-index: 5; }
    h1 { margin: 0 0 6px; font-size: 18px; }
    .sub { color:#aab3d3; font-size: 13px; display:flex; gap:10px; flex-wrap: wrap; align-items:center; }
    .badge { display:inline-block; padding: 2px 10px; border-radius: 999px; border:1px solid #223057; background:#0b1020; color:#cfd6f5; font-size: 12px; }

    main { max-width: 1150px; margin: 0 auto; padding: 16px; display: grid; gap: 16px; grid-template-columns: 380px 1fr; }
    .card { background:#0f1629; border:1px solid #1b2440; border-radius: 16px; padding: 14px; }
    .card h2 { margin: 0 0 10px; font-size: 14px; color:#cfd6f5; }
    .muted { color:#aab3d3; font-size: 12px; }

    label { display:block; font-size: 12px; color:#aab3d3; margin: 10px 0 6px; }
    input, select, textarea, button {
      width: 100%; box-sizing: border-box; border-radius: 12px; border: 1px solid #223057;
      background:#0b1020; color:#e7eaf3; padding: 10px 12px; font-size: 14px;
    }
    textarea { min-height: 88px; resize: vertical; }
    button { cursor:pointer; border: 1px solid #2d3d6f; background:#111a33; }
    button:hover { filter: brightness(1.05); }
    button:disabled { opacity: 0.55; cursor: not-allowed; }

    .row { display:grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .row3 { display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
    .btnRow { display:flex; gap: 10px; }
    .btnRow button { width: auto; flex: 1; }

    .kpi { display:grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
    .kpi .box { background:#0b1020; border:1px solid #223057; border-radius: 14px; padding: 10px; }
    .kpi .v { font-size: 18px; margin-top: 4px; }

    table { width: 100%; border-collapse: collapse; overflow: hidden; border-radius: 14px; border:1px solid #1b2440; }
    th, td { padding: 10px; border-bottom:1px solid #1b2440; vertical-align: top; font-size: 13px; }
    th { text-align:left; color:#cfd6f5; background:#0b1020; position: sticky; top: 74px; z-index: 3; }
    tr:hover td { background:#0b1020; }
    .right { text-align:right; }

    .tag { display:inline-block; padding: 2px 8px; border-radius: 999px; border:1px solid #223057; font-size: 12px; color:#cfd6f5; }
    .pill { display:inline-flex; gap:8px; align-items:center; flex-wrap: wrap; }

    .divider { border:none; border-top:1px solid #1b2440; margin:14px 0; }

    .toast {
      position: fixed; left: 50%; bottom: 62px; transform: translateX(-50%);
      background: #0b1020; border:1px solid #223057; border-radius: 14px; padding: 10px 12px;
      min-width: 260px; max-width: 92vw; display:none; z-index: 9999;
    }
    .ok { color:#6ee7b7; }
    .warn { color:#fbbf24; }
    .bad { color:#fb7185; }

    .debugbox {
      margin-top: 10px; padding: 10px 12px; border-radius: 14px;
      background:#0b1020; border:1px solid #223057;
      max-height: 220px; overflow:auto; white-space: pre-wrap; word-break: break-word;
      font-size: 12px;
    }

    /* –í–∏–¥–∏–º–∞—è –≤–µ—Ä—Å–∏—è ‚Äî HTML (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ JS) */
    .versionbar{
      position: fixed; left: 10px; bottom: 10px; z-index: 9998;
      padding: 8px 10px; border-radius: 12px;
      background:#0b1020; border:1px solid #223057;
      color:#cfd6f5; font-size: 12px;
      opacity: 0.92;
    }

    .noscript{
      margin: 12px 0;
      padding: 10px 12px;
      border-radius: 14px;
      background:#2a1b1b;
      border:1px solid #7a2d2d;
      color:#ffd4d4;
      font-size: 13px;
    }

    @media (max-width: 980px){
      main { grid-template-columns: 1fr; }
      th { top: 0; position: static; }
    }
  </style>

  <!-- Supabase (–≤–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç). –í–ê–ñ–ù–û: –±–µ–∑ inline onload/onerror -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js" defer></script>

  <!-- –ù–∞—à –∫–æ–¥ –¢–û–õ–¨–ö–û –≤–Ω–µ—à–Ω–∏–º —Ñ–∞–π–ª–æ–º (–æ–±—Ö–æ–¥–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É inline JS) -->
  <script src="./app.js" defer></script>
</head>

<body>
<header>
  <h1>Trading Journal</h1>
  <div class="sub">
    <span>–ñ—É—Ä–Ω–∞–ª —Å–¥–µ–ª–æ–∫ + –∞–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞ ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (Supabase Postgres)</span>
    <span class="badge" id="versionBadge">–í–µ—Ä—Å–∏—è: v2025-12-28 00:20 (IL)</span>
    <span class="badge" id="sbBadge">Supabase: ‚Ä¶</span>
    <span class="badge" id="jsBadge">JS: ‚Ä¶</span>
  </div>
</header>

<main>
  <section class="card">
    <noscript>
      <div class="noscript">
        ‚ùå JavaScript –æ—Ç–∫–ª—é—á—ë–Ω. –ö–Ω–æ–ø–∫–∏ –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –ø–æ–∫–∞ —Ç—ã –Ω–µ –≤–∫–ª—é—á–∏—à—å JS.
      </div>
    </noscript>

    <h2>üîê –ê–∫–∫–∞—É–Ω—Ç</h2>

    <label>Email</label>
    <input id="email" placeholder="you@email.com" autocomplete="email" />

    <label>–ü–∞—Ä–æ–ª—å</label>
    <input id="password" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password" />

    <div class="btnRow" style="margin-top:10px;">
      <button id="loginBtn" type="button">–í–æ–π—Ç–∏</button>
      <button id="signupBtn" type="button">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
    </div>

    <div class="btnRow" style="margin-top:10px;">
      <button id="logoutBtn" type="button">–í—ã–π—Ç–∏</button>
      <button id="reloadBtn" type="button">–û–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å–∏</button>
    </div>

    <div class="muted" id="authState" style="margin-top:10px;">–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶</div>

    <hr class="divider">

    <h2>‚ûï –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å</h2>

    <div class="row">
      <div>
        <label>–î–∞—Ç–∞</label>
        <input id="date" type="date" />
      </div>
      <div>
        <label>–¢–∏–ø</label>
        <select id="type">
          <option value="trade">–°–¥–µ–ª–∫–∞</option>
          <option value="market">–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞</option>
          <option value="review">–†–∞–∑–±–æ—Ä –¥–Ω—è</option>
        </select>
      </div>
    </div>

    <label>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä BTCUSDT / ES / AAPL)</label>
    <input id="symbol" placeholder="BTCUSDT" />

    <div class="row3">
      <div>
        <label>–°–µ—Ç–∞–ø / —Å—Ç—Ä–∞—Ç–µ–≥–∏—è</label>
        <input id="setup" placeholder="Breakout / Pullback / Range..." />
      </div>
      <div>
        <label>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
        <select id="side">
          <option value="">‚Äî</option>
          <option value="long">Long</option>
          <option value="short">Short</option>
        </select>
      </div>
      <div>
        <label>–†–∏—Å–∫ (R)</label>
        <input id="risk" type="number" step="0.1" placeholder="1" />
      </div>
    </div>

    <div class="row">
      <div>
        <label>–†–µ–∑—É–ª—å—Ç–∞—Ç (R)</label>
        <input id="resultR" type="number" step="0.1" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä 1.5 –∏–ª–∏ -1" />
      </div>
      <div>
        <label>–≠–º–æ—Ü–∏—è</label>
        <select id="emotion">
          <option value="">‚Äî</option>
          <option>—Å–ø–æ–∫–æ–π–Ω–æ</option>
          <option>—Å—Ç—Ä–∞—Ö</option>
          <option>–∂–∞–¥–Ω–æ—Å—Ç—å</option>
          <option>—Ñ–æ–º–æ</option>
          <option>–∑–ª–æ—Å—Ç—å</option>
          <option>—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</option>
        </select>
      </div>
    </div>

    <label>–ü–ª–∞–Ω / –∫–æ–Ω—Ç–µ–∫—Å—Ç (—á—Ç–æ –≤–∏–¥–µ–ª –Ω–∞ —Ä—ã–Ω–∫–µ)</label>
    <textarea id="context" placeholder="–¢—Ä–µ–Ω–¥, —É—Ä–æ–≤–Ω–∏, –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å, –Ω–æ–≤–æ—Å—Ç–∏, —á—Ç–æ –æ–∂–∏–¥–∞–ª..."></textarea>

    <label>–ò—Ç–æ–≥ / –æ—à–∏–±–∫–∏ / —á—Ç–æ —É–ª—É—á—à–∏—Ç—å</label>
    <textarea id="lessons" placeholder="–ß—Ç–æ —Å–¥–µ–ª–∞–ª –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≥–¥–µ –Ω–∞—Ä—É—à–∏–ª –ø—Ä–∞–≤–∏–ª–∞, –ø–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è..."></textarea>

    <div class="btnRow" style="margin-top:10px;">
      <button id="saveBtn" type="button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ë–î</button>
      <button id="resetBtn" type="button">–û—á–∏—Å—Ç–∏—Ç—å</button>
    </div>

    <p class="muted" style="margin-top:10px;">
      ‚ö†Ô∏è –°–Ω–∞—á–∞–ª–∞ <b>–≤–æ–π—Ç–∏</b> –∏–ª–∏ <b>–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</b>. –ò–Ω–∞—á–µ –∑–∞–ø–∏—Å—å –Ω–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è.
    </p>

    <div class="debugbox" id="debugLog">Debug log: –æ–∂–∏–¥–∞—é –∑–∞–ø—É—Å–∫ app.js‚Ä¶</div>
  </section>

  <section class="card">
    <h2>üìä –î–∞—à–±–æ—Ä–¥</h2>
    <div class="kpi" id="kpi"></div>

    <div class="row" style="margin-top:12px;">
      <div>
        <label>–ü–æ–∏—Å–∫</label>
        <input id="q" placeholder="BTC / breakout / –æ—à–∏–±–∫–∏..." />
      </div>
      <div>
        <label>–§–∏–ª—å—Ç—Ä —Ç–∏–ø–∞</label>
        <select id="filterType">
          <option value="">–í—Å–µ</option>
          <option value="trade">–°–¥–µ–ª–∫–∞</option>
          <option value="market">–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞</option>
          <option value="review">–†–∞–∑–±–æ—Ä –¥–Ω—è</option>
        </select>
      </div>
    </div>

    <div class="muted" id="listState" style="margin-top:10px;">‚Äî</div>

    <div style="margin-top:12px; overflow:auto;">
      <table>
        <thead>
          <tr>
            <th style="width:110px;">–î–∞—Ç–∞</th>
            <th style="width:110px;">–¢–∏–ø</th>
            <th>–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ</th>
            <th style="width:100px;" class="right">R</th>
            <th style="width:140px;">–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>
    </div>
  </section>
</main>

<!-- –í–ò–î–ò–ú–ê–Ø –í–ï–†–°–ò–Ø (HTML) -->
<div class="versionbar">Trading Journal ¬∑ <b>v2025-12-28 00:20 (IL)</b></div>

<div class="toast" id="toast"></div>
</body>
</html>
